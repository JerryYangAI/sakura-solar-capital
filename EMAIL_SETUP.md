# 邮件通知设置指南

## 概述
网站现在支持客户咨询表单提交后自动发送邮件到您的Gmail邮箱。当客户填写咨询表单或考察预约表单时，您将自动收到包含客户信息的邮件通知。

## 设置步骤

### 1. 创建环境变量文件
在项目根目录创建 `.env.local` 文件：

```bash
# Gmail 邮箱配置
GMAIL_USER=your-email@gmail.com
GMAIL_APP_PASSWORD=your-16-digit-app-password
```

### 2. 获取Gmail应用密码

1. 访问 [Google 账户设置](https://myaccount.google.com/)
2. 点击左侧菜单的"安全性"
3. 在"登录Google"部分，找到"应用密码"
4. 如果看不到"应用密码"选项，请先启用两步验证
5. 点击"应用密码"
6. 选择应用类型："邮件"
7. 选择设备："其他(自定义名称)"
8. 输入应用名称，如："Sakura Solar Capital"
9. 点击"生成"
10. 复制生成的16位密码（格式：xxxx xxxx xxxx xxxx）

### 3. 配置环境变量

将您的Gmail邮箱和16位应用密码填入 `.env.local` 文件：

```bash
GMAIL_USER=your-actual-email@gmail.com
GMAIL_APP_PASSWORD=abcd efgh ijkl mnop
```

### 4. 安装依赖

确保安装了 nodemailer：

```bash
npm install nodemailer
npm install @types/nodemailer --save-dev
```

### 5. 重启开发服务器

```bash
npm run dev
```

## 功能说明

### 咨询表单邮件
- 当客户填写联系表单时，您会收到包含以下信息的邮件：
  - 客户姓名、邮箱、电话
  - 投资预算
  - 咨询内容
  - 提交时间

### 考察预约邮件
- 当客户填写考察预约表单时，您会收到包含以下信息的邮件：
  - 客户基本信息
  - 期望考察日期
  - 行程时长和参与人数
  - 备注信息
  - 提交时间

## 邮件格式
邮件采用HTML格式，包含：
- 专业的邮件模板设计
- 客户信息分类展示
- 提交时间（日本时区）
- 清晰的视觉层次

## 故障排除

### 常见问题

1. **邮件发送失败**
   - 检查Gmail应用密码是否正确
   - 确认Gmail账户已启用两步验证
   - 检查网络连接

2. **收不到邮件**
   - 检查垃圾邮件文件夹
   - 确认Gmail_USER环境变量设置正确
   - 检查控制台错误信息

3. **应用密码无法生成**
   - 确保Gmail账户已启用两步验证
   - 尝试重新生成应用密码

### 测试方法

1. 访问网站的联系页面
2. 填写并提交咨询表单
3. 检查您的Gmail邮箱
4. 查看是否收到格式化的邮件通知

## 安全注意事项

- 不要将 `.env.local` 文件提交到版本控制系统
- 定期更换Gmail应用密码
- 确保服务器环境变量安全

## 生产环境部署

在部署到生产环境时，请确保：
1. 在部署平台设置相应的环境变量
2. 使用生产环境的Gmail账户
3. 测试邮件发送功能是否正常
